import{b as v,e as f,o as i,a as r,f as t,t as d,m as c,s as w,w as g,z as _,j as h,k as p,F as S,i as y,l as a,p as x,q as V}from"./swiper-vue.520d28f9.js";import{M as b}from"./MyButton.1f5d35d1.js";import{d as F}from"./entry.6922467d.js";import{_ as k}from"./_plugin-vue_export-helper.c27b6911.js";const L=F("commentsStore",{state:()=>({userComments:[],apiComments:[]}),getters:{getComments:function(){return[...this.userComments,...this.apiComments]}},actions:{addUserComment(e){this.userComments=[e,...this.userComments]},addApiComments(e){this.apiComments=[...this.apiComments,...e]}}});const M={name:"ReviewsPage",components:{MyButton:b},data(){return{counter:0,isPostsLoading:!1,page:1,limit:10,userValue:"",textValue:"",isFormOpen:!0,isStateForm:"hide form"}},setup(){const e=L(),s=v(()=>e.getComments);return{commentsStore:e,getComments:s}},methods:{async fetchGetComments(){try{this.isPostsLoading=!0;const s=await(await fetch(`https://dummyjson.com/comments?limit=${this.limit}&skip=${(this.page-1)*this.limit}&select=body,postId`,{})).json();await this.addCommentsToApiComments(s.comments)}catch(e){console.log(e),console.error("reviewsPage error",e)}finally{this.isPostsLoading=!1}},loadMoreComments(){this.page++,this.fetchGetComments()},toggleForm(){this.isFormOpen===!0?(this.isFormOpen=!1,this.isStateForm="open form",this.cancelComment()):(this.isFormOpen=!0,this.isStateForm="close form")},cancelComment(){this.userValue="",this.textValue=""},addCommentToUserComments(e){this.commentsStore.addUserComment(e)},addCommentsToApiComments(e){this.commentsStore.addApiComments(e)},handleSubmitComment(){const e="my-"+this.counter++,s={id:Date.now(),body:"",postId:e,user:{id:e,username:""}};s.user.username=this.userValue,s.body=this.textValue,this.addCommentToUserComments(s),this.userValue="",this.textValue=""}},mounted(){this.fetchGetComments()}},l=e=>(x("data-v-117d6f73"),e=e(),V(),e),I={class:"reviews"},P={class:"reviews__controlForm"},T={class:"reviews__writeComment"},O={class:"reviews__form_buttons"},U={class:"reviews__wrapper"},N=l(()=>t("h3",{class:"reviews__title center"},"OUR CLIENTS COMMENTS",-1)),A={key:0},B={class:"reviews__user"},j=l(()=>t("span",null,"client:",-1)),q={class:"reviews__text"},D=l(()=>t("span",null,"review:",-1)),E={key:1,class:"center"},G=l(()=>t("span",null,"Show more comments",-1)),R=[G];function z(e,s,H,C,m,n){const u=f("my-button");return i(),r("section",I,[t("div",P,[t("h5",{class:"reviews__hideForm",onClick:s[0]||(s[0]=(...o)=>n.toggleForm&&n.toggleForm(...o))},d(m.isStateForm),1)]),c(t("div",T,[t("form",{class:"reviews__form",onSubmit:s[3]||(s[3]=g((...o)=>n.handleSubmitComment&&n.handleSubmitComment(...o),["prevent"]))},[c(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>m.userValue=o),class:"reviews__form_input",placeholder:"username",required:""},null,512),[[_,m.userValue]]),c(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=o=>m.textValue=o),class:"reviews__form_textarea",placeholder:"comment",style:{height:"80px"},required:"",minLength:"5",maxLength:"300"},null,512),[[_,m.textValue]]),t("div",O,[h(u,{class:"reviews__form_submit",type:"submit"},{default:p(()=>[a(" Submit ")]),_:1}),h(u,{class:"reviews__form_cancel",type:"button",onClick:n.cancelComment},{default:p(()=>[a(" Cancel ")]),_:1},8,["onClick"])])],32)],512),[[w,m.isFormOpen]]),t("div",U,[N,m.isPostsLoading?(i(),r("div",E," Loading... ")):(i(),r("div",A,[(i(!0),r(S,null,y(C.getComments,o=>(i(),r("div",{key:o.id,class:"reviews__comments"},[t("div",B,[j,a(" "+d(o.user.username),1)]),t("div",q,[D,a(" "+d(o.body),1)])]))),128))])),t("div",{class:"reviews__more center",onClick:s[4]||(s[4]=(...o)=>n.loadMoreComments&&n.loadMoreComments(...o))},R)])])}const X=k(M,[["render",z],["__scopeId","data-v-117d6f73"]]);export{X as default};
